Zabbix的监控范围

在Zabbix系统中有多达十五种数据采集方法，每种方法所使用的原理和场景也不一样。下表列出了这十三种数据采集方法的原理及适合的场景。

| 序号 |                方法名称                 | 描述                                                         |
| ---- | :-------------------------------------: | ------------------------------------------------------------ |
| 1    | 通过Zabbix被监控设备代理(agent)采集数据 | 在被监控设置安装并运行zabbix被监控设备代理进程（Zabbix系统自带的一个组件。在编译配置选项带--enable-agent选项。）通过该进程收集监控项目的数据，并与Zabbix服务器或监控服务器代理(Proxy)通信，**主动发送或被动接受服务器或服务器代理查询**的数据采集方式。这种方法只适用于采集服务器或工作站上的监控数据，不适合采集路由器、交换机、防火墙等网络设备的监控数据。 |
| 2    |                简单检查                 | 这种数据采集方法是指Zabbix服务器（也包括服务器代理）自身通过**检查被监控设备的tcp端口状态或ICMP的信息来获取监控数据**的数据采集方法。不需要在被监控设备上安装任何第三方软件。但是，这种方法只适合收集像服务的端口状态等状态数据，不适合采集性能方面的数据。 |
| 3    |          通过SNMP协议采集数据           | 即通过SNMP的查询和陷入进行监控数据的采集。适合对网络设备，如防火墙、交换机、路由器等的监控数据的采集。目前Zabbix系统支持SNMP v1 SNMP v2c和SNMP v3版本的协议。通过SNMP协议采集数据**不需要在被监控设备上安装任何第三方软件**，但是需要**配置和开启SNMP服务**，并允许监控服务器查询。这个是我们目前使用比较多的数据采集方法。缺点是，其通信协议走的UDP协议，传输为不可靠传输，所以存在丢数据的现象。同时，MIB库一般是跟被监控设备有关，不适合监控自定义的项目。 |
| 4    |         Zabbix系统内部数据采集          | Zabbix系统内部数据采集方法就是**采集和监控Zabbix系统自身状态和性能数据的方法**。Zabbix系统内部数据采集方法是由Zabbix服务器端通过计算获取的，所以这种数据采集方法不需要安装任何的客户端。这个数据采集方法只适用于Zabbix服务器自身的监控，不适用其它设备和主机。主要用于监控Zabbix系统自身的问题。 |
| 5    |               Zabbix陷入                | Zabbix陷入是指**在被监控主机上定时的执行特定的程序或命令**，主动向Zabbix系统的服务器端或服务器代理端发送被监控项目的数据的数据采集方法。因此，Zabbix陷入是一种主动模式的数据采集方法，即由被监控主机定时或周期的向Zabbix系统的服务器端或服务器代理端发送所采集到的数据。这个数据采集方法一般只适用于服务器、工作站等我们可以在其上安装和部署脚本程序的设备。这个数据采集方法可以采集我们自己定义的个性化的监控项目。缺点是需要自己编写脚本和程序，所以对编程能力有一定的要求。 |
| 6    |                数据聚合                 | 所谓数据聚合（在Zabbix前台的数据采集型中称之为Aggregate Checks）是指并不直接从被监控主机上采集监控数据，而是指根据已定义的监控项目上采集的数据通过一定的计算方法**复合出新的监控项目的数据**。适合于跨多个被监控设备的数据汇总计算，以生成新监控项目。 |
| 7    |      通过脚本采集数据（外部检查）       | 这种数据采集方法其实很简单，即由Zabbix服务器端进程根据配置信息，**按计划地执行指定的脚本程序或命令**，然后俘获脚本程序或命令的输出内容为对应监控项目的值。这种方法也要求有一定的编程能力。同时，因为脚本是在Zabbix服务器端执行的，所以要求被监控设备要给Zabbix服务器端一定的授权，存在一定的安全风险。 |
| 8    |               数据库监控                | 数据库监控采集方法的原理就是，Zabbix服务器进程直接通过ODBC接口技术，**查询各种不同类型的数据库里的数据**，以采集需要的数据内容。由此我们可以看出，数据库监控是一种通过直接操作被监控系统数据库的方法来采集数据的。因此，这种数据采集方法可以采集应用层面的性能数据，可以监控个性化的项目。同时，因为这个方法是使用了ODBC技术，所以它可以支持的数据库种类非常多，几乎支持市场上主流的数据库。缺点是，Zabbix系统中只能支持的SQL语句，不能嵌套。 |
| 9    |          通过IPMI代理采集数据           | 智能平台管理接口(IPMI，Intelligent Platform Management Interface)，是管理基于Intel架构的企业系统中所使用的外围设备所采用的一种工业标准。通过这种方法采集数据的优点是：它可以采集到其它方法无法**采集到的硬件状态信息**，例如CPU温度、风扇转数等等。缺点是，需要被监控硬件能够支持。而这个一般在购买服务器（这种方法一般只适用于服务器）时是需要单独购买控制卡的。 |
| 10   |           通过SSH协议采集数据           | 通过SSH协议采集的原理很简单，zabbix服务器端或服务器代理端根据配置，**使用SSH协议连接到被监控主机上，然后在被监控主机上执行用户配置的命令序列或者指定的脚本**，Zabbix服务器端或服务器代理端捕获被执行的命令序列或脚本程序所返回的结果作为被监控项目所采集的数据。所以，这种方法可以采集到我们所需要的个性化的数据。缺点是需要有一定的编程能力，以及被监控设备和Zabbix服务器之间需要通过公钥私钥验证。 |
| 11   |         通过TELNET协议采集数据          | 与“通过SSH协议采集数据”方法是类似的，只是这种方法走的是TELNET协议，所以安全要更低。 |
| 12   |           通过JMX协议采集数据           | Java管理扩展(JMX，Java Management Extensions)是一个可作为应用程序、设备和系统等植入管理功能的框架。简单地说，JMX框架在不对现有的应用做修改的情况下植入到现有的应用中，以对现有的应用的运行情况进行管理。这种方法一般只适用于**采集JAVA应用的数据**，而不太适合采集系统级的甚至硬件级的监控数据。要求被监控设备上必须安装JAVA环境，同是启动相应的服务。 |
| 13   |       通过计算的方法采集监控数据        | 通过计算的方法获取监控数据，顾名思义就是**将现有的多个被监控项目上所采集的数据进行一定的计算**，从而获取新的数据的数据采集方法。这种数据采集方法与“数据聚合”有相同之处也有不同之处，相同之处是这两个方法本质上都是对现有的监控项目所采集到的数据进行复合计算，以获得新的需要监控的数据。不同之处是，这个方法一般只针对单台被监控设备内部不同项目的数据进行计算，不跨主机计算。这种方法我们目前有少量在使用。 |
| 14   |              捕捉器监控项               | 捕捉器监控项接收**传入的数据**，而不是查询它。适用于任何想要推送到Zabbix的数据。 |
| 15   |              日志文件监控               | 用于集中监控和分析具有/不具有日志转动能力的**日志文件**。    |



参考文档：

1. http://blog.51cto.com/yenokia/1959378
2. http://www.ttlsa.com/zabbix/how-to-chose-zabbix-item-type/
3. https://www.zabbix.com/documentation/3.4/zh/manual/config/items/itemtypes
